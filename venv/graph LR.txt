graph LR
    A["ğŸ“„ PDF Input<br/>CatÃ¡logo TurÃ­stico"] -->|Streamlit Interface| B["âš™ï¸ Pipeline<br/>Inicializa Sistema"]
    
    B -->|Etapa 1| C["ğŸ”„ PDF Chunking<br/>pdf_chunker.py"]
    C -->|Processa PÃ¡gina por PÃ¡gina| D["âœ… Chunks Markdown<br/>page_001.md<br/>page_002.md<br/>..."]
    
    D -->|Etapa 2| E["ğŸ” Semantic Indexing<br/>semantic_indexer.py"]
    E -->|Cria Embeddings| F["âœ… Ãndice FAISS<br/>Vetores SemÃ¢nticos<br/>Mapeamento de Chunks"]
    
    F -->|Etapa 3| G["ğŸ¤– Tour Extraction<br/>tour_extractor.py"]
    G -->|Parallelization + Context| H["ğŸ§  CrewAI Agent<br/>GPT-4o-mini<br/>Multi-Idioma"]
    H -->|Extrai Estruturado| I["âœ… JSON Estruturado<br/>20+ campos por tour<br/>Hierarquia completa"]
    
    I -->|Etapa 4A| J["ğŸ“Š Result Exporter<br/>result_exporter.py"]
    J -->|NormalizaÃ§Ã£o| K["âœ… Excel Bruto<br/>30+ colunas<br/>Todos os detalhes"]
    
    I -->|Etapa 4B| L["ğŸ”§ Result Refiner<br/>result_refiner.py"]
    L -->|DeduplicaÃ§Ã£o<br/>OtimizaÃ§Ã£o| M["âœ… Excel Refinado<br/>9 campos essenciais<br/>Menor preÃ§o"]
    
    K -->|Streamlit| N["ğŸ–¥ï¸ Interface Web<br/>VisualizaÃ§Ã£o<br/>Download"]
    M -->|Debug Internal| O["ğŸ” Debug Data<br/>Interno para testes"]
    
    N -->|User| P["ğŸ’¾ Download<br/>Excel Completo<br/>AnÃ¡lise Imediata"]
    
    style A fill:#e1f5ff
    style P fill:#c8e6c9
    style C fill:#fff9c4
    style E fill:#fff9c4
    style G fill:#fff9c4
    style J fill:#fff9c4
    style L fill:#fff9c4
    style H fill:#f8bbd0
    style N fill:#c5cae9